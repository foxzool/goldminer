[根目录](../../../CLAUDE.md) > [src](../../) > **screens**

## Screens 模块

> **模块职责**: 管理游戏的主要屏幕状态和转换逻辑，包括启动画面、标题界面、加载界面和游戏画面。

## 入口与启动

模块通过 `plugin()` 函数注册到 Bevy 应用中：
- 初始化 `Screen` 状态枚举
- 注册所有屏幕插件：
  - `gameplay::plugin` - 游戏画面逻辑
  - `loading::plugin` - 加载界面
  - `splash::plugin` - 启动画面
  - `title::plugin` - 标题界面

## 对外接口

### 状态枚举
```rust
pub enum Screen {
    Splash,    // 启动画面（默认）
    Title,     // 标题界面
    Loading,   // 加载界面
    Gameplay,  // 游戏画面
}
```

### 主要导出
- `Screen` 状态枚举 - 屏幕状态管理
- 各子屏幕插件系统
- 暂停系统集成

## 关键依赖与配置

### 外部依赖
- `bevy` - 游戏引擎核心
- `crate::Pause` - 暂停状态
- `crate::Menu` - 菜单状态
- `crate::demo::level` - 关卡系统

### 系统集成
- 与 `Pause` 状态系统集成
- 与 `Menu` 状态系统协同工作
- 输入系统集成（键盘控制）

## 数据模型

### 状态管理
- `Screen` 枚举 - 屏幕状态机
- 与 `Pause` 和 `Menu` 状态的协同
- 状态转换的自动化处理

### 暂停系统
- `Pause(bool)` - 暂停状态资源
- `PausableSystems` - 可暂停系统集
- 暂停覆盖层管理

## 测试与质量

### 测试覆盖
**暂无测试文件**。建议添加：
- 屏幕状态转换测试
- 暂停功能测试
- 输入响应测试
- 资源加载测试

### 代码质量
- 清晰的状态管理架构
- 良好的关注点分离
- 完善的文档注释

## 常见问题 (FAQ)

**Q: 如何添加新的游戏屏幕？**
A: 扩展 `Screen` 枚举，创建相应的插件模块，并添加到主插件的注册中。

**Q: 如何自定义暂停行为？**
A: 修改 `gameplay.rs` 中的暂停系统，调整按键绑定和暂停覆盖层的样式。

**Q: 如何处理屏幕间的数据传递？**
A: 使用 Bevy 的资源系统或事件系统在不同屏幕间传递数据。

## 相关文件清单

| 文件 | 描述 | 重要性 |
|------|------|--------|
| `mod.rs` | 模块入口、状态定义、插件注册 | ⭐⭐⭐ |
| `gameplay.rs` | 游戏画面和暂停系统 | ⭐⭐⭐ |
| `title.rs` | 标题界面实现 | ⭐⭐ |
| `loading.rs` | 加载界面实现 | ⭐⭐ |
| `splash.rs` | 启动画面实现 | ⭐ |

## 变更记录 (Changelog)

**2025-11-18 15:03:39** - 初始化 screens 模块文档，分析屏幕状态管理和游戏循环